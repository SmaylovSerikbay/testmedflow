#!/bin/bash

# ============================================
# Скрипт автоматического заполнения БД
# ============================================

echo ""
echo "================================================"
echo "   АВТОМАТИЧЕСКОЕ ЗАПОЛНЕНИЕ БАЗЫ ДАННЫХ"
echo "================================================"
echo ""

# Проверка, что Docker контейнеры запущены
if ! docker ps | grep -q medwork-backend; then
    echo "[ОШИБКА] Docker контейнеры не запущены!"
    echo ""
    echo "Запустите контейнеры командой:"
    echo "  docker-compose up -d"
    echo ""
    exit 1
fi

echo "[1/2] Проверка Docker контейнеров..."
echo "  ✓ Backend запущен"
echo ""

echo "[2/2] Запуск скрипта заполнения..."
echo ""

node seed-database.js

echo ""
echo "================================================"
echo ""

if [ $? -eq 0 ]; then
    echo "✅ База данных успешно заполнена!"
    echo ""
    echo "Теперь можно войти в систему:"
    echo "  http://localhost:5173"
    echo ""
else
    echo "❌ Произошла ошибка при заполнении"
    echo ""
fi

